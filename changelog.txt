2007-11-01 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/Resources/Japanese.lproj/MainMenu.nib
		「編集」＞「検索」＞「選択部分を抽出に使用」を追加。command-option-E。
	* application/source/bbs/BoardListItem/ConcreteBoardListItem.m
		掲示板リストの同期を実行しても、ユーザ定義リストの URL が適切に書き変わらないことがある問題を修正。
	* application/source/browser/CMRBrowser-Action.m
	* application/source/browser/CMRBrowser-ViewAccessor.m
	* application/source/browser/CMRBrowser.m
		ツールバーの「一覧の検索」は、これまで「テキストのみ」または「ツールバーが非表示」「ツールバーから検索フィールドが溢れていて見えない」
		「ツールバーに検索フィールドを置いていない」ような場合にはシートを出していたが、Leopard でシートが上手く使用可能にならなくなったことと、
		シートの使用自体が、インタフェース的に好ましくない（シートにブロックされてスレッド一覧などを操作できない！）ため、この方法を廃止した。
		かわりに、自動的にツールバーを「アイコンとテキスト」に切り替えてから検索フィールドにフォーカスを移すようにした。
		- 「ツールバーから検索フィールドが溢れていて見えない」「ツールバーに検索フィールドを置いていない」場合は Beep が鳴るだけになったが、
		　　これは勘弁ということで。将来余力があれば、もう少し工夫する。
		- CMRAccessorySheetsController クラスは未使用になり、ソースファイルはターゲットから外した。
	* application/source/browser/CMRBrowser-Validation.m
		ブラウザウインドウで、IndexField が First Responder かどうか判定するコードをより適切なものに変更。
		今までのコードは、とくに Leopard ではコンソールにエラーを吐くことがあった。
	* application/source/thread/CMRThreadViewer.m
		特定の状況で、スレッドを CMRHistoryManager に登録しようとした時点でスレッドタイトルがセットされていないため、スレッドを
		履歴に登録できず、このために http://pc11.2ch.net/test/read.cgi/mac/1193398125/253 のような問題が発生していた。
		これを、DatabaseManager にスレッドタイトルを問い合わせることでできるだけ履歴に登録することを試みるように改良。
	* application/source/browser/BSTitleRulerView.m
		Leopard マナー：スレッドタイトルバーのパスポップアップメニューは、command-click に加えて右クリックでも出すようにした。
2007-10-31 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/thread/CMRThreadViewer-Find.m
		Leopard Only：「次を検索」「前を検索」「最初から検索」などで、見つかった語句を Safari 3 で検索した時のように強調表示
		するようにした。
	* application/source/thread/CMRThreadViewer-ViewAccessor.m
	* application/source/thread/CMRThreadViewer.m
	* application/source/preferences/AppDefaults-Background.m
	* application/source/preferences/AppDefaults-FontColor.m
	* application/source/preferences/AppDefaults.m
		スレッドのテーマを切り替えた際のスレッドの表示更新の方法を見直し。
2007-10-30 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/subproj/reply/connector/SG2chConnector.m
		Leopard 対策：まちBBS で書き込みに成功した後、「ERROR」シートが表示されてしまう問題を解決。
		- これも -[NSObject(NSURLConnectionDelegate) connection:willSendRequest:redirectResponse:] の挙動の変化が
		　原因。
	* application/source/browser/CMRBrowser-ViewAccessor.m
		Leopard 対策：-[NSTableView allowsTypeSelect] がデフォルトで YES となっているため、スレッド一覧で一部のキー操作
		（例えば page up/down によるスクロール）に対する反応が鈍くなっていた。-[NSTableView setAllowsTypeSelect:NO] と
		して、この問題を解決。
	* application/source/preferences/AppDefaults-ThreadViewer.m
	* application/subproj/previewer/BSImagePreviewInspector-Tb.m
	* frameworks/CocoMonar/framework/src/CMRFileManager.m
		Leopard マナー：Leopard では、「リンク先のファイルをダウンロード」及び「プレビューインスペクタでのイメージの保存先」の
		デフォルトのフォルダを「ダウンロード」フォルダにした。また、CMRFileManager に「ダウンロード」フォルダのパスを取得する
		メソッドを追加した (Tiger 以前では、今まで同様「デスクトップ」フォルダを返す）。
	* application/source/network/CMRDownloader.m
		開発中に一時的に試していたコードが中途半端に残っていたために、10.3.9 でスレッドを更新するとクラッシュするようになっていた
		問題を修正。
=================================================
2007-10-29 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* docs/old_changelog/changelog_until_starlight_breaker_final.txt
		[新規追加] changelog.txt が長くなってきたので、1.5 より前の部分は別のファイルに切り離すことにした。
	* application/source/preferences/CMRPreferencesDefautValues.h
		掲示板リストのデフォルトの「行の高さ」を 19 pixels から 20 pixels に変更。
	* application/Resources/BSTitleRulerAppearance.plist
		スレッドタイトルバーのカラーを Leopard の Mail.app の RSS 表示を参考に調整。また、タイトルのテキストは
		デフォルトでは文字を彫り込んだような効果を付けないように変更。
	* frameworks/SGAppKit/SGAppKit.xcodeproj/project.pbxproj
		SGAppKit:
		ビルド設定の見直し。
	* frameworks/SGAppKit/framework/src/custom/bathyscaphe/BSBoardListView.m
		SGAppKit:
		コードのリファクタリング。
	* frameworks/SGAppKit/framework/src/event/SGKeyBindingSupport.m
	* frameworks/SGAppKit/framework/src/extensions/NSEvent-SGExtensions.h
	* frameworks/SGAppKit/framework/src/extensions/image/NSImage-SGExtensions.m
	* frameworks/SGAppKit/framework/src/extensions/layoutmanager/NSLayoutManager+CMXAdditions.m
	* frameworks/SGAppKit/framework/src/extensions/pasteboard/NSPasteboard-SGExtensions.m
	* frameworks/SGAppKit/framework/src/extensions/scrollview/NSScrollView-SGExtensions.m
	* frameworks/SGAppKit/framework/src/extensions/textview/NSTextView-SGExtensions.m
	* frameworks/SGAppKit/framework/src/extensions/userdefaults/NSUserDefaults+SGAppKitExtensions.m
		SGAppKit:
		細部の修整。
	* frameworks/SGAppKit/framework/src/custom/BSTitleRulerAppearance.m
	* application/source/browser/BSTitleRulerView.m
		SGAppKit:
		スレッドタイトルバーのアピアランスについて、「タイトルの文字に彫り込んだような効果を付けるか」の設定、及び
		「BathyScaphe によって dat 落ちと判断されました。」メッセージのテキストカラーを設定できるよう内部の準備をした。
	* application/source/browser/CMRBrowser-Action.m
		Leopard 対策：Leopard では、RBSplitView を Expand/Collapse したとき、きちんと表示に反映されないことが
		あるようだ。Expand/Collapse 直後にもう一度明示的に -[RBSplitView adjustSubviews] を呼び出して、この問題を
		回避するように修正。
	* application/source/browser/CMRBrowser-Delegate.m
		Leopard マナー：Leopard の NSTableView は何もしなくても省略表示されたセルの内容をポップアップ表示するので、
		ツールチップで省略表示されたセルの内容を表示する機能@スレッド一覧は、Leopard では off になるようにした。
	* application/source/network/CMRDownloader.m
		Leopard 対策：NSURLConnection の挙動が変わったようで、dat を読みにいった時にこれまでは HTTP ステータスコード 302 が
		帰ってきていたものが、勝手に「人大杉」のページにリダイレクトされてしまうようになった。この影響で●による dat 落ちログの
		取得が出来なくなっていた問題を修正。
		Leopard 対策：また、[Bug 11205] を回避するよう修正。 
	* application/source/network/BSLoggedInDATDownloader.m
	* application/source/bbs/BSSettingTxtDetector.m
	* application/source/bbs/BoardWarrior.m
	* application/source/view/SGLinkCommand.m
	* application/subproj/previewer/BSIPIToken.m
	* application/subproj/previewer/BSImagePreviewInspector.m
		BSIPIDownload クラスを使用していたものを BSURLDownload クラスの使用に変更。
		また、SGNetwork フレームワークのヘッダを import している部分をすべて SGFoundation の import に変更。
	* application/source/bbs/BoardManager-SettingTxt.m
	* application/source/browser/CMRBrowser-Validation.m
	* application/source/browser/CMRBrowser-BLEditor.m
	* application/source/browser/EditBoardSheetController.m
		掲示板リストのコンテクストメニューの validation、およびそこから呼び出される action での処理対象の取得処理について
		方法とコードを整理、再構築。
	* application/source/browser/CMRBrowser-ViewAccessor.m
		掲示板リストの背景色が、「環境設定」>「表示」を開いた時に不適切に変わってしまう問題を修正。
	* application/source/preferences/AppDefaults-Background.m
		掲示板リストの背景色が、main window でないとき、Tiger 以前で縞模様の window background color になってしまう
		問題を修正。
	* application/source/view/popup/CMXPopUpWindowController.m
		ポップアップをロックした時に、表示位置を補正するように改良(タイトルバーの高さ分だけポップアップウインドウの下端を下げる)。

	* frameworks/SGFoundation/SGFoundation.xcodeproj/project.pbxproj
	* frameworks/SGFoundation/framework/source/SGFoundation.h
	* frameworks/SGFoundation/framework/source/classes/SGFoundationClasses.h
	* frameworks/SGFoundation/framework/source/classes/xml/SGXmlPullParser.m
	* frameworks/SGFoundation/framework/source/extensions/string/NSString+TEC.m
	* frameworks/SGFoundation/framework/source/utilities/SGFoundationUtils.m
		SGFoundation:
		- コードの整理、未使用のカテゴリやヘッダ、クラス、関数などを削除。
		SGNetwork フレームワークは BathyScaphe のどのコンポーネントでもリンクされなくなり、未使用になった。
	* frameworks/SGFoundation/framework/source/classes/SGHTTPDefines.h
		[新規追加] SGNetwork から SGFoundation に移動した。
	* frameworks/SGFoundation/framework/source/classes/url-loading/BSURLDownload.[h|m]
		[新規追加] SGNetwork の BSIPIDownload クラスを一部改良し、クラス名を BSURLDownload に変更して、
		SGFoundation に組み込んだ。
=================================================
2007-10-27 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/CMRExports.h
		暫定的に #define NSAppKitVersionNumber10_4 をここに書いた。
	* frameworks/SGAppKit/framework/src/custom/bathyscaphe/BSIconAndTextCell.m
	* application/source/preferences/CMRPreferencesDefautValues.h
	* application/source/browser/CMRBrowser-Delegate.m
	* SGAppKit/framework/src/custom/bathyscaphe/BSBoardListView.m
		SGAppKit フレームワーク、及び BathyScaphe 本体：
		Leopard マナー：掲示板リストの配色を Leopard 風に調整。また、掲示板リストは、メインウインドウでないときは灰色で表示
		するようにした。
	* application/subproj/previewer/BSIPIDownload.m
		SGNetwork フレームワーク：
		Leopard 対策：なぜか -[NSObject(NSURLDownloadDelegate) download:willSendRequest:redirectResponse:] が実際の
		リダイレクトでなくても送られるようなので、redirectResponse が nil のときはそのまま request を返して続行するようにした。
	* application/source/manager/BSScriptsMenuManager.m
	* application/source/bbs/BoardListItem/SmartBLIEditorHelper.m
	* application/source/browser/CMRBrowser-ViewAccessor.m
	* application/subproj/previewer/BSImagePreviewInspector-Tb.m
	* application/subproj/previewer/BSImagePreviewInspector-View.m
		Leopard マナー：id<NSMenuItem> は、NSMenuItem * に変更。
	* application/source/browser/BSDownloadTask.m
		Leopard 対策：なぜか -[NSObject(NSURLConnectionDelegate) connection:willSendRequest:redirectResponse:] が実際の
		リダイレクトでなくても送られるようなので、redirectResponse が nil のときはそのまま request を返して続行するようにした。
	* application/source/composer/CMRMessageAttributesTemplate.m
	* application/source/composer/CMRAttributedMessageComposer.m
		Leopard 対策：リンク文字列、レス番号部分でマウスカーソルを人差し指型に変化させる仕組みが今までのものだとうまくいかないようなので、
		NSAttributedString の属性辞書の一要素として指定するようにしてみた。
2007-10-26 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/Resources/Japanese.lproj/board_default.plist
		最新のものに更新。
	* application/Resources/Japanese.lproj/AlertPanel.strings
	* application/source/manager/CMRKeychainManager.m
	* application/source/preferences/AppDefaults-Account.m
		使われていなかったリソースや #define をいくつか削除したほか、コードを整理。
2007-10-25 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/thread/CMRThreadViewer-Action.m
	* application/source/thread/CMRThreadViewer-OwnHistory.m
	* application/source/view/BSIndexingPopupper.m
	* application/source/view/SGHTMLView.m
	* application/source/view/SGLinkCommand.m
		メソッド名の綴りを変更。
	* application/source/view/popup/CMXPopUpWindowController.m
		ポップアップ・ロック機能の細かい改良。
	* application/source/view/CMRThreadView.m
		実装の一部を SGAppKit 側に移した。
	* frameworks/SGAppKit/SGAppKit.xcodeproj/project.pbxproj
	* frameworks/SGAppKit/framework/resource/English.lproj/InfoPlist.strings
	* frameworks/SGAppKit/framework/src/SGAppKit.h
	* frameworks/SGAppKit/framework/src/extensions/pasteboard/NSPasteboard-SGExtensions.m
	* frameworks/SGAppKit/framework/src/extensions/workspace/NSWorkspace-SGExtensions.m
		SGAppKit:
		AppKit のカテゴリ群のうち、未使用のものをターゲットから外してスリム化した。
		その一方で、NSWorkspace のカテゴリには新しいメソッドを追加した。
2007-10-24 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/view/CMRThreadView.m
	* application/source/view/SGHTMLView.m
	* application/Resources/Japanese.lproj/HTMLView.strings
		選択テキストのコンテクストメニューに「n 個のリンクを Web ブラウザで開く」「n 個のリンクをプレビュー」を追加した。
		選択テキストの中に含まれるリンクを抽出し、Web ブラウザまたはプレビュープラグインにまとめて渡す。
		- 選択テキスト中に適切なリンクが含まれないときは、これらのメニュー項目は (両方、あるいは片方)表示されない。
		- プレビュープラグインが -(BOOL)showImageWithURLs:(NSArray)urls; を pricipal class に実装していないと
		　「n 個のリンクをプレビュー」は使用できない(淡色表示になる)。
		- 複数のリンクを一度に受け取った後の、Web ブラウザ or プレビュープラグインの挙動については、当然、彼らの実装に依存する。
	* application/subproj/previewer/BSImagePreviewInspector.m
	* application/subproj/previewer/BSImagePreviewerInterface.h
	* application/subproj/previewer/BSIPIFullScreenWindow.h
		プレビューインスペクタ (2.6.2 -> 2.6.3)：
		複数の URL を一度にプレビューインスペクタに渡せるようになった。
2007-10-23 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/view/popup/CMXPopUpWindowController+View.m
	* application/source/view/popup/CMXPopUpWindowController.m
		ポップアップウインドウをロックした際に、レイアウトがずれたり、移動できなくなる問題を修正。
	* application/source/manager/DatabaseManager-DatabaseAccess.m
		指定した boardID を持つ掲示板レコードを、boardInfoTable から DELETE するためのメソッドを追加した。
2007-10-20 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/subproj/reply/account/w2chAuthenticater.m
		コードを整理したほか、UserAgent は CocoMonar.framework で取得できるものを使用する方法に一本化した。
	* application/source/view/SGHTMLView.m
		外部リンクを control-クリックしてコンテクストメニューを表示しようとするとき、リンク全体を選択状態にする
		挙動を復帰させた。(See 2007-08-12)
	* application/source/thread/CMRThreadViewer-Download.m
	* application/Resources/Japanese.lproj/ThreadViewer.strings
		「●ログインして取得」ボタンは、2ch のスレッドでのみアラートに表示されるようにした。
	* application/source/view/CMRThreadView.m
		スレッドのコンテクストメニューの動作の信頼性を改善。
	* frameworks/SGFoundation/framework/source/classes/files/MoreFilesX.[c|h]
		MoreFilesX 1.0.2 に更新(いままでは、1.0.1 だった)。
	* frameworks/SGFoundation/framework/source/classes/files/SGFileRef.m
		ビルド時の警告が出ないよう、適切な書き方に改めたり(完全ではない)、deprecated なメソッドを使用している部分を修正。
	* frameworks/SGFoundation/framework/source/extensions/string/NSCharacterSet-SGExtensions.[h|m]
	* application/source/extensions/NSCharacterSet+CMXAdditions.[h|m]
		NSCharacterSet のサブクラスを内部で作って使っていた部分は、すべてサブクラスを使わないよう(かつ、同等の
		機能を実現できるよう)修正。
	* application/Resources/text/HostProperties.plist
	* frameworks/CocoMonar/framework/src/CMRHostTypes.(h|m)
	* application/source/composer/CMXTextParser.m
		古すぎて時代にそぐわないいくつかの関数や定義、すでに存在しないいくつかの外部掲示板のサポートを廃止した。
	* application/source/manager/CMRHistoryManager.m
	* application/source/preferences/CMRHostHandler.m
	* application/source/window/CMRReplyMessenger-Connector.m
	* application/subproj/reply/connector/w2chReply_shita.m
	* application/subproj/reply/error/SG2chErrorHandler.m
		上記変更に伴う微修正。
	* frameworks/SGFoundation/framework/source/extensions/string/NSString-SGExtensions.m
	* frameworks/SGFoundation/framework/source/extensions/string/String+Utils.m
		未使用メソッドの廃止と、deprecated なメソッドを使用している部分の修正。
	* frameworks/SGFoundation/SGFoundation.xcodeproj/project.pbxproj
	* frameworks/SGFoundation/framework/source/extensions/SGFoundationAdditions.h
		いくつかの未使用なカテゴリをターゲットから外した。
=================================================
2007-10-16 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* misc/sqlite/os_unix.c
		試験的に、#define SQLITE_ENABLE_LOCKING_STYLE 0 のコメントアウトを解除した。
		==[参考]=========
		 http://bathyscaphe.sourceforge.jp/cgi-bin/wiki.cgi?p=til504
		 http://www.sqlite.org/cvstrac/chngview?cn=3459
		 http://www.mail-archive.com/sqlite-users@sqlite.org/msg21123.html
		=================
		ネットワーク上にログフォルダのエイリアスを置いて、BathyScaphe 1.5 or later が使えないと嘆く人の声が…
		これで解決するのかどうか?
	* application/source/preferences/AppDefaults-Bundle.m
	* application/subproj/reply/connector/w2chConnect.h
		●ログイン用の session-id を取得するためのクラスは 2chConnector.plugin に含まれているが、これを呼び出しやすくした。
		- 以前は、SG2chConnector クラスからの呼び出ししか考慮されていなかった。
	* application/source/thread/CMRThreadViewer-Download.m
	* application/source/thread/CMRThreadViewer.m
	* application/Resources/Japanese.lproj/ThreadViewer.strings
		取得しようとした dat が見つからないとき、「●ログインして取得」を試みることができるようにした。
		また、コードを少し整理し、アラートの文面も一部見直した。
	* application/source/network/BSLoggedInDATDownloader.[h|m]
		[新規追加] ●ログインして dat 落ちしたスレッドの内容を取得するための、ThreadTextDownloader のサブクラス。
2007-10-15 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/thread/CMRThreadViewer-Action.m
	* application/source/thread/CMRThreadViewer-Link.m
	* application/source/window/CMRReplyMessenger-Connector.m
	* application/source/window/CMRReplyMessenger.m
	* application/Resources/Japanese.lproj/Messenger.strings
		書き込み周りのコード整理、およびサウンドエフェクトを「なし」にしていると書き込み完了時に自動更新されない
		v173 での問題を修正。また、書き込み時のエラーで、モーダルアラートで表示していたものの一部をシートで
		表示するように改良。
	* application/subproj/reply/connector/SG2chConnector.m
	* application/subproj/reply/connector/w2chConnect.h
	* application/subproj/reply/error/SG2chErrorHandler.m
		2chConnector.plugin の内部をリファクタリング。とくに、現代的な API の利用と、使われていないコードの
		削除や整理を行なった。
=================================================
2007-10-14 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/thread/CMRThreadViewer-Action.m
	* application/source/thread/CMRThreadViewer-Validation.m
	* application/source/thread/TextFinder.m
	* application/Resources/Japanese.lproj/CMRThreadMenu.nib
		テキストを選択したときのコンテクストメニューに「抽出」を追加した。
		選択された語句を使って、名前・メール・本文を対象に抽出を実行する(検索パネルは表示しない)。
	* application/Resources/Japanese.lproj/CMRThreadMenu.nib/keyedobjects.nib
		[新規追加] CMRThreadMenu.nib の「Mac OS X 10.2 or later」フォーマットへの更新に伴うもの。
	* application/Resources/Japanese.lproj/CMRThreadMenu.nib/objects.nib
		[削除] 同上。
2007-10-11 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/preferences/AppDefaults-Filter.m
	* application/subproj/preference/filter/CMRFilterPrefController.m
	* application/source/composer/CMRSpamFilter.m
		迷惑レスフィルタの内容が変更されていないか5分おきにタイマーでチェックして、変更されている場合には BSSpamFilter.plist や
		NGExpressions.plist に書き込むようにした。
2007-10-10 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/CMRAppDelegate.m
	* application/Resources/Japanese.lproj/MainMenu.nib
		スクリプトメニューに「用語説明を開く」を追加した。
	* application/source/browser/Browser.m
	* application/source/window/CMRReplyMessenger.m
	* application/Resources/BathyScaphe.scriptSuite
	* application/Resources/BathyScaphe.scriptTerminology
		AppleScript サポートの改良：
		ブラウザウインドウ(browser)でも selected text プロパティが取得できるようにした。
		また、書き込みウインドウ(reply document)で selected text プロパティを取得および set できるようにした。
		- selected text を set することは、すでに選択されているものを置換することを意味する。
2007-10-08 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/object/TS2SoftwareUpdate.m
		インターネットに接続していない状態で BathyScaphe を起動したとき、自動的にアップデートを確認する設定になっていると
		「アップデートを確認できませんでした」とエラーのアラートが表示されてしまうが、これはうっとうしいので表示しないようにした。
	* application/source/bbs/BoardListItem/BoardListItem.m
		サーバ移転検知機能が、まれに hoge.u.la ホストへのサーバ移転であると誤認識してしまう問題を修正。
	* application/source/browser/BSDownloadTask.m
	* application/source/browser/BSThreadsListOPTask.m
	* application/Resources/Japanese.lproj/ThreadsList.strings
		スレッド一覧のダウンロード時に、
		- NSURLConnection のエラーで失敗した時のアラートを改良し、エラーの内容を分かりやすくした。
		- ダウンロード中に「中止」したときに、スレッド一覧が真っ白になってしまう問題を修正した。
2007-10-07 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/CMRAppDelegate.m
	* application/Resources/BathyScaphe.scriptSuite
	* application/Resources/BathyScaphe.scriptTerminology
		AppleScript の新しい命令「remove from database」を追加した。
		- パラメータに alias を取る。その alias に対応するスレッドの情報を BathyScaphe データベースから削除する。
		- BathyScaphe 以外の手段で（Finder とか）ログファイルを捨てたとき、この命令を実行すればデータベースの内容にも反映できる、と。
		- この命令は実際にログファイルを削除することはしないので注意すること（ログファイルを削除せず、この命令だけ実行することは良くない）。
	* application/source/browser/Browser.m
	* application/Resources/Japanese.lproj/ThreadsList.strings
	* application/source/manager/CMRDocumentFileManager.m
		dat 落ちしたスレッドのログファイルを一度にゴミ箱に入れる機能を追加した。
		- 「掲示板」＞「dat 落ちしたスレッドのログを削除...」
		- ただし、「お気に入り」に登録されているスレッドのログは除外される。
		- dat 落ちしているかどうかは、単に「スレッド一覧に表示されているかどうか？」で判断される。このため、スレッド一覧で何か検索しているとき
		　（フィルタリングされているとき）は、このメニュー項目は選択できないようになっている。また、スマート掲示板や「お気に入り」でも選択できない
		　ようになっている。
		- もちろん、対応する .cmreply ファイルもゴミ箱に移動する。
	* application/source/browser/CMRBrowser-List.m
	* application/source/browser/CMRBrowser-ViewAccessor.m
	* application/source/bbs/BoardManager-BSAddition.m
	* application/Resources/Japanese.lproj/MainMenu.nib
		掲示板ごとにスレッド一覧のカラム状態を個別に設定する能力は、不安定なため 1.6 では搭載しないことにした。1.5 以前の仕様に復帰させた。
2007-09-20 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/thread/CMRThreadViewer-Download.m
		あぼーんなどが発生した場合に表示される「削除して再取得」シートについて、シートの表示中やボタンをクリックした際に不意に
		クラッシュする問題を修正。retain/release/autorelease 絡みの問題。
	* application/Makefile
		ターゲット名を Twincam Angel に変更したので Makefile もそのように修正。
=================================================
2007-09-18 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/browser/CMRBrowser-Delegate.m
	* application/source/preferences/AppDefaults-ThreadsList.m
		スレッド一覧のテーブルカラムの状態の復帰時に問題が発生する可能性があった箇所を引き続き修正。
2007-09-17 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/browser/CMRBrowser-List.m
		スレッド一覧のテーブルカラムの状態の復帰時に問題が発生する可能性があった箇所を修正。
	* application/source/browser/CMRThreadsList-DataSource.m
		スレッド一覧からスレッドをゴミ箱にドラッグ＆ドロップしても削除されなくなっていた問題を修正。
	* application/source/view/CMRThreadView.m
	* application/source/view/popup/CMXPopUpWindowController.m
		とくにポップアップ内に表示されている抽出／フィルタリングされたレスなどに対して、コンテクストメニューの表示内容が
		不適切だったり、違うレスに属性が適用されてしまう問題を修正。
2007-09-16 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/browser/BSTitleRulerView.m
		[SGAppKit] スレッドタイトルバー：タイトルの文字を描画する際、影のような効果を付けるようにした。
		- NSShadow ではなく、（BSIconAndTextCell のように）先に1ピクセル下にずらして、グレー色にした同じ文字列を描いたもの。
		　視認性の向上を狙っているが、まだ調整／検討が必要か。
	* application/source/window/CMRThreadViewerTbDelegate.m
	* application/source/preferences/AppDefaults.m
	* application/source/preferences/CMRPreferencesDefautValues.h
		Hidden Option "DisablesHistoryButtonPopupMenu" を追加。省略時の値は YES であり、このときは
		「戻る／進む」ツールバー項目をクリック＆ホールドしてもポップアップメニューを表示しない（一部の環境でクラッシュする問題を
		回避するため）。度胸のある人は、このオプションを NO にセットすれば、ポップアップメニューを表示して利用できる。
	* application/source/network/CMRDownloader.m
	* application/source/composer/CMRSpamFilter.m
		デバッグ用の NSLog() が残っていたのを削除した。
	* application/Resources/Japanese.lproj/Browser.nib
		掲示板リスト下部の「追加（＋）」ボタンの Action 接続が切れていたのを直した。
=================================================
2007-09-08 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/browser/CMRBrowser-Delegate.m
	* application/source/bbs/BoardManager-BSAddition.m
		スレッド一覧のカラムの状態の保存に関するコードの修正。
	* application/subproj/BWAgent/SJIS2UTF8
		Universal Binary のものに更新した（すっかり忘れていた）。
	* application/subproj/reply/connector/w2chReply_2ch.m
		2ch に書き込む時にテキストのエンコーディングを試みる順番を変えた。
		今までは kCFStringEncodingMacJapanese → kCFStringEncodingDOSJapanese → kCFStringEncodingShiftJIS の順で
		試し、エンコードに成功したらそのエンコーディングで書き込んでいたが、これを
		kCFStringEncodingShiftJIS → kCFStringEncodingDOSJapanese → kCFStringEncodingMacJapanese の順で
		試すように変更した。
2007-09-07 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/view/CMRThreadView.m
	* application/source/view/CMRThreadView-Drop.m
	* application/source/thread/CMRThreadViewer-ViewAccessor.m
	* application/source/thread/CMRThreadViewer-Link.m
		スレッドのコンテクストメニュー／レス番クリックのメニューの構成・内容を見直し。
		---- 長文解説 ----
		スレッドのコンテクストメニュー／レス番クリックのメニューは以下のように分類できる：
		1. レス番クリックのメニュー　(A)
		2. スレッドの内容表示領域での「何気ない右クリックによる」コンテクストメニュー (B)
		3. スレッドの内容表示領域での「外部リンクに対する」コンテクストメニュー (C)
		4. スレッドの内容表示領域での「選択されたテキストがあり、その選択テキスト上で右クリックした」コンテクストメニュー
			4-1. テキストの選択範囲が「複数のレスにまたがっている」(D)
			4-2. テキストの選択範囲が「ひとつのレスの中で完結している」
				4-2-1. 選択範囲が「複数行に渡る」(E)
				4-2-2. 選択範囲が「一行の中で完結している」(F)
		5. スレッドの内容表示領域での「選択されたテキストがあるけど、その選択テキストの外部で右クリックした」コンテクストメニュー (G)

		このうち、(G) は (B) と同様に扱い、(B) と同じ内容のメニューを表示する。
		(D) は、BathyScaphe のイディオムでは「複数のレスの属性を同時に設定する」ことを意味するので、相応のメニュー項目を用意する。
		(E) と (F) は似ているが、(E) では「禁止語句に追加」「Google で検索」「Wikipedia で表示」は使わない（はず）なので、
		(E) と (F) のメニュー内容は異なるという訳。
		(B) では、いままでほとんど「スレッド」メニューの内容をコピーして表示していたが、大胆に削減し、絞り込んだ。
		その一方で、(B) でも (A) と同等の操作が行えるよう、今までサブメニューに入れていた項目を第一階層で表示するようにした。
		(C) は唯一、今回変更が入らなかったものである。
		---- 解説終了 ----
	* application/source/composer/BSNGExpression.m
		文字列を修正しても正規表現のインスタンスが更新されなかった問題を修正。
2007-09-04 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/Resources/Japanese.lproj/CMRTaskDescription.strings
		スレッド一覧のダウンロード中の進行状況メッセージのフォーマットを修整。
	* application/source/browser/BSDownloadTask.m
		ダウンロード済みのバイト数だけでなく、推定コンテンツサイズもステータスメッセージに表示するようにした。
	* application/Resources/Japanese.lproj/MainMenu.nib/classes.nib
	* application/source/manager/CMRMainMenuManager.m
	* application/source/view/CMRThreadView.m
	* application/source/thread/CMRThreadViewer-ViewAccessor.m
	* application/Resources/Japanese.lproj/CMXMessageMenu.nib
		スレッドのコンテクストメニュー、およびレス番クリックメニューの内容変更に伴う変更。
		また、「スレッド」メニューの「レスのフィルタ」を「レスの属性」に変更。
	* application/source/composer/BSNGExpression.m
		正規表現オブジェクトの NGExpressions.plist への読み書きに不具合があったので修正。
	* application/source/composer/CMRMessageFilter.m
		迷惑レスフィルタの条件判定に一部間違いがあったので修正。
	* application/Resources/BSTitleRulerAppearance.plist
		[新規追加] デフォルトのスレッドタイトルバーアピアランス属性を収めたファイル。
		- 注意：このファイルをユーザがテキストエディタや Property List Editor などで開いて
		　カスタマイズすることは想定していないし、してはいけないし、できない。
	* frameworks/SGAppKit/framework/src/custom/BSTitleRulerAppearance.[h|m]
		[新規追加] スレッドタイトルバーの各種アピアランス属性を与えるオブジェクト。
	* application/Resources/Japanese.lproj/Downloader.strings
	* application/Resources/Japanese.lproj/ThreadViewer.strings
		ローカライズ文字列の修整。
	* application/Resources/Japanese.lproj/BSBoardInfoInspector.nib
		インタフェースの細部の修整。
	* application/source/browser/CMRBrowser-ViewAccessor.m
	* application/Resources/Japanese.lproj/Browser.nib
		CMRBrowser-ViewAccessor.m のコードで生成する部品と Browser.nib 内で
		あらかじめアーカイブしておく部品を互いに持ち替えて調整。
	* application/Resources/Japanese.lproj/CMRReplyWindow.nib
	* application/Resources/Japanese.lproj/CMRThreadViewerComponents.nib
		微修正。
	* application/Resources/Japanese.lproj/MainMenu.nib
		メニュー項目の追加（「ファイル」＞「Finder に表示」）、action 名の変更（「掲示板」メニュー
		内の一部項目）、その他ソースコード側の変更に対応した細かい調整。
	* application/source/manager/CMRMainMenuManager.m
	* application/source/CMRAppDelegate+Menu.m
		「表示」＞「欄」サブメニューをテーブルカラムヘッダのコンテクストメニューでも使用するため、
		メニュー生成メソッドを使いやすいよう改良。
	* application/source/bbs/BSBoardInfoInspector.m
		CMRBrowser のコードの変更に伴い、影響を受ける箇所を修整。
	* application/source/bbs/BoardManager-BSAddition.m
		掲示板ごとにスレッド一覧のテーブルビューの状態を読み書きするためのメソッドを追加した他、
		全体的にコードを細かく修整。
	* application/source/browser/BSTitleRulerView.m
		スレッドタイトルバーの実装を見直し、背景をグラフィック関数で塗るようにした。また、
		BSTitleRulerView クラスは BathyScaphe 本体から SGAppKit に移動した。
		- あと、command キーを押しながらスレッドタイトルバーをクリックすると、パス・ポップアップ・メニューを
		　表示するようにした。
	* application/source/thread/CMRAbstructThreadDocument.m
	* application/source/browser/CMRBrowser-Delegate.m
		開いているスレッドで「dat 落ち」印を付け／外したときは、通知を送ってすみやかにスレッド一覧の
		表示にも反映させるようにした。
	* application/source/browser/CMRBrowser-List.m
	* application/source/browser/CMRBrowser-ViewAccessor.m
	* application/source/browser/CMRBrowser.m
		細部の修整。
	* application/source/browser/CMRThreadsList.m
		細部の修整。
	* application/source/composer/CMRSpamFilter.m
	* application/source/manager/CMROpenURLManager.m
		細部の修整。
	* application/source/network/CMRDATDownloader.m
	* application/source/network/CMRDownloader-Task.m
	* application/source/network/CMRThreadHTMLDownloader.m
	* application/source/network/ThreadTextDownloader.m
	* application/source/network/CMRDownloader.m
		細部を見直し、無駄なメソッドの呼び出しを削除するなどして安定性と効率の向上を図った。
		「ブラウザを立ち上げなおしてみてください。」エラーの原因の可能性があった、サーバからのレスポンスヘッダから
		サーバの時刻を取得するメソッドの呼び出しタイミングが不適切に減少していた問題を修正した。
	* application/source/preferences/AppDefaults-Filter.m
		細部の修整。
	* application/source/browser/CMRThreadsList-DataSource.m
	* application/source/preferences/AppDefaults-FontColor.m
	* application/subproj/preference/Japanese.lproj/ViewPane.nib
		dat 落ちスレッドのフォント・カラーを設定できるようにした。
	* application/source/task/CMRTask.h
	* application/source/util/missing.h
		ビルド時に「〜が実装されていないかもしれないよ」という警告がうっとうしいので
		いくつかのメソッドを非形式プロトコルとして定義しておいた。
	* application/source/thread/CMRAbstructThreadDocument.m
	* application/source/view/ThreadsListTable.m
	* application/source/window/CMRReplyMessenger.m
		「Finder に表示」のサポート。
	* application/source/thread/CMRThreadViewer-Action.m
	* application/source/thread/CMRThreadViewer-Contents.m
	* application/source/thread/CMRThreadViewer-Download.m
		レス数が1001未満のスレッドでも、HTTP ステータス 302 が返ってきた場合は自動的に「dat 落ち」印を付けるようにした
		（今までは確認のアラートを表示していた）。また、ソースコードを整理した。
	* application/source/thread/CMRThreadViewer-Link.m
	* application/source/thread/CMRThreadViewer-ViewAccessor.m
	* application/source/thread/CMRThreadViewer.m
		細部の修整。
	* application/source/view/CMRThreadView.m
		スレッドの内容表示領域に何かをドロップしたときの、ハイライトの色が間違っていたのを直した。
	* application/source/window/CMRReplyController-ViewAccessor.m
	* application/source/window/CMRReplyController.m
	* application/source/window/CMRReplyMessenger-Connector.m
		細部の修整。
	* application/source/thread/CMRThreadViewer-OwnHistory.m
	* application/source/window/CMRThreadViewerTbDelegate.m
		「戻る／進む」ツールバー項目は、クリック＆ホールドで履歴をポップアップ表示するようにした。
	* application/source/window/CMRBrowserTbDelegate.m
	* application/source/view/BSNobiNobiToolbarItem.m
		「掲示板リスト分のスペース」項目の高さを見直し、「小さいサイズ」でツールバーを表示したときに十分に
		ツールバーの高さが低くならない問題を解消した。
	* application/subproj/previewer/BSIPIToken.m
		[プレビューインスペクタ] ダウンロードの進行具合をステータスメッセージでも表示するようにした。
		（プログレスバーだけでは、低速回線の環境、あるいはダウンロード中にフルスクリーンにしたときなどに
		　ダウンロードの進行状況がわかりにくかったため）。
2007-08-18 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/network/CMRNetRequestQueue.[h|m]
		[削除] 未使用につき削除。
2007-08-15 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/composer/CMRMessageFilter.m
		迷惑レスフィルタの効率化。OGRegularExpression は BSNGExpression が保持しているものを使用し、
		非正規表現に関しては従来通り -[NSString rangeOfString:options:range:] でチェックするようにした。
	* application/source/composer/BSNGExpression.m
		BSNGExpression インスタンスは、isRegularExpression == YES の場合は自身で OGRegularExpression インスタンスを
		生成・保持するようにした。OGRegularExpression インスタンスは NGExpressions.plist にアーカイブ化されて保存もされる。
2007-08-14 masakih <masakih@users.sourceforge.jp>
	* application/source/browser/BSDBThreadList.m:
	* application/source/browser/CMRThreadsList-DataSource.m:
		datOchi スレッドを [NSColor lightGrayColor] で表示するようにした。（### 要変更 ###）
		表示のためのNSAttributedStringのアトリビュートが
		「日付（新着）」「日付（普通）」「その他（新着）」「その他（普通）」で分けられていた物を、
		「パラグラフスタイル（日付）」「パラグラフスタイル（その他）」
		「フォント／カラー（新着）」「フォント／カラー（普通）」「フォント／カラー（Dat落ち）」で分け、
		パラグラフスタイルを適応後、フォント／カラーを追加して適応するように変更した。
	* application/source/browser/BSThreadListItem.[h|m]:
	* application/source/manager/DatabaseManager-DatabaseAccess.m:
	* application/source/thread/CMRThreadAttributes.m:
		データベースのdatOchiを保存／使用をするようにした。
	* misc/sqlite/*:
		sqliteを3.4.1にバージョンアップ。
		先日pragma.cに加えた修正は本家で既に修正済みだったため、先日の修正は破棄した。
		不要な機能は出来る限り省いた。付け加えたプリプロセッサマクロは以下の通り。
			SQLITE_OMIT_INCRBLOB=1
			SQLITE_OMIT_UTF16=1
			SQLITE_OMIT_AUTHORIZATION=1
			SQLITE_OMIT_LOAD_EXTENSION=1
		SQLITE_OMIT_VIRTUALTABLEも付け加えたかったが、コンパイル不能のため断念した。
		不要なファイルも今後使う可能性もあるのでcvsに追加してある。
2007-08-13 masakih <masakih@users.sourceforge.jp>
	* 僕が作ったほとんどのファイル:
		ファイルのヘッダコメントを正しい書式に直した。
	* application/source/manager/DatabaseUpdater.[h|m]:
		+[DatabaseUpdater updateFrom:to:]を追加。
		    DatabaseManagerにややこしい処理をさせないように。
		データベースファイルバージョン 3への変換処理追加。
	* application/source/manager/DatabaseManager.[h|m]:
		Version Table を廃止。
		ThreadInfo Table に IsDatOchiColumn カラムを追加。
		データベースファイルバージョンを 3 に変更。
		データベースファイルバージョンを PRAGMA user_version に保存するようにした。（存在を完全に見落としてた。）
	* misc/sqlite/pragma.c:
		PRAGMA user_version; がカラム名を返さないので返すように変更。
=================================================
2007-08-12 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/composer/BSNGExpression.m
		-[BSNGExpression<NSObject> isEqual:] および -[BSNGExpression<NSObject> hash] の実装。文字列が同じなら
		イコールと見なすことにした（同じ語句の重複登録を防ぐことができるように）。
	* application/Resources/Japanese.lproj/CMRThreadMenu.nib
	* application/Resources/Japanese.lproj/CMXMessageMenu.nib
	* application/Resources/Japanese.lproj/ThreadViewer.strings
	* application/source/view/CMRThreadView.m
	* application/source/view/SGHTMLView.m
	* application/source/thread/CMRThreadViewer-Action.m
		スレッドのコンテクストメニューの強化：
		- コンテクストメニューから迷惑レスフィルタ用のいわゆる「NG ワード」を追加するメソッドを追加。
		-- BathyScaphe の伝統的な「堅苦しさ」にのっとり、メニュー項目名は「NG ワードを追加」ではなく「禁止語句を追加」にした :-)
		- 「レスのアクション」サブメニューを「レスの属性」に名称変更。
		-- レスの属性、という言葉は既にオンラインヘルプ等で用いており、新しいものではない。
		- コンテクストメニューを状況に応じて変化させるようにした。
		-- 1.テキストが選択されていて、かつその選択テキスト上でコンテクストメニューを表示させたとき。→選択テキストに対する操作に特化
		-- 2.外部リンク上で表示させたとき。→今まで通りリンク用のメニュー
		-- 3.それ以外（注：テキスト選択時で、選択テキスト上「以外」で表示させたときもここに含まれる）→今までとほぼ同じメニュー
		- 外部リンク上でコンテクストメニューを表示させるとき、リンク全体を選択するのを止めた。
	* application/Resources/Japanese.lproj/MainMenu.nib
	* application/source/thread/CMRThreadViewer-Link.m
	* application/source/thread/CMRThreadViewer-Validation.m
		「スレッド」＞「レスのフィルタ」サブメニューに「AA フォントの自動適用を実行」を追加。
		「迷惑レスフィルタを実行」と同様に、手動で AAD を実行させたいときに使用する。
	* application/source/manager/BSLinkDownloadManager.m
	* application/source/composer/CMRSpamFilter.m
	* application/source/composer/BSNGExpression.m
		エラー処理の強化。また、BSSpamFilter.plist から NGExpressions.plist へデータをコンバートするようにした。
	* application/source/preferences/AppDefaults-Filter.m
		BSSpamFilter.plist から NSExpressions.plist へデータをコンバート済みかどうかを表すデフォルト値とそのアクセサを追加。
2007-08-11 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/manager/BSLinkDownloadManager.m
	* application/subproj/preference/BSAdvancedPaneArrayController.m
	* application/subproj/preference/Japanese.lproj/AdvancedPane.nib
		「詳細」ペイン用に用意したコードの一部を、「フィルタ」ペインでも使い回せるように一般化し、実際、使い回した。
	* application/subproj/preference/Japanese.lproj/FilterPreferences.nib
	* application/subproj/preference/filter/CMRFilterPrefController.m
	* application/source/composer/CMRMessageFilter.m
	* application/source/composer/CMRSpamFilter.m
	* application/source/preferences/AppDefaults-Filter.m
		迷惑レスフィルタの強化：
		- いわゆる「NGワード」関連部分を強化した。
		- NGワードと迷惑レスのサンプルは、いままで同じ BSSpamFilter.plist に同居していたが、NGワードについては新しく
		　「NGExpressions.plist」に分離して記録するようにした。
		- SpamFilter.plist から BSSpamFilter.plist への変更に伴う内容の自動引き継ぎは、もうそろそろいらないと思うので
		　コードを削除した。BSSpamFilter.plist から NGExpressions.plist への自動（部分）引き継ぎは後で実装する。
		- NGワードが含まれるかどうか調べる対象を、名前欄・メール欄・本文欄の一部またはすべてから選択指定できるようにした。
		- NGワードに鬼車の正規表現を利用できるようにした（Powered by OgreKit）。
		- NGワードの設定画面を作り直した。
		- 「環境設定」＞「フィルタ」は、nib ファイルを含め全体的にコードを見直した。
	* application/source/composer/BSNGExpression.[h|m]
		[新規追加] いわゆる「NGワード」を表すオブジェクト。
=================================================
2007-08-08 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* frameworks/SGAppKit/framework/src/custom/bathyscaphe/BSBoardListView.m
		Intel Mac で 掲示板リストの Type-To-Select が正しく動作しなかった問題を修正。
		キーイベントを拾って文字列を復元する際に、日本語の文字がちゃんと取れなくなっていた。
		エンディアンがらみか？typeUnicodeText ではなく typeUTF16ExternalRepresentation を指定することで解決。
		ただし、typeUTF16ExternalRepresentation は Mac OS X 10.4 以降なので、10.3.x では typeUnicodeText のまま。
		10.3.x+Intel Mac の組み合わせはあり得ないから、これでいいだろう。
	* application/subproj/reply/error/SG2chErrorHandler.m
		まちBBSに書き込むと、正常に書き込めているのに「データがありません」とエラーが表示されるようになっていた問題を修正。
2007-08-07 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* frameworks/SGFoundation/framework/source/classes/xml/SGXMLEntityReference.m
		遅ればせながら CocoMonar の修正を取り込み。
		>2007-04-22 minamie <minamie@po.twin.ne.jp>
		>土吉の数値文字参照がタミル文字になる現象に対応
		>(26スレ目347番目のレス)
	* application/subproj/previewer/BSImagePreviewInspector-Tb.m
	* application/subproj/previewer/BSImagePreviewInspector-View.m
	* application/subproj/previewer/BSImagePreviewInspector.m
	* application/subproj/previewer/BSIPIToken.m
	* application/subproj/previewer/Japanese.lproj/BSImagePreviewInspector.nib
	* application/subproj/previewer/Japanese.lproj/Localizable.strings
		プレビューインスペクタ（2.6→2.6.1）：
		- イメージの「再読み込み」を行えるようにした。
		- 上記に伴い、「保存／中止」ツールバーボタン・メニュー項目を「中止／再読み込み」ツールバーボタン・メニュー項目に変更し、
		　「保存」ボタン・メニュー項目は独立させた。
		- 「イメージを別名で保存...」メニュー項目は「イメージを保存」項目を option キーを押しながら選択したときに現れるように変更。
		- その他細部の調整。
	* frameworks/CocoMonar/framework/src/CMRFileManager.m
		CocoMonar Framework: ユーザドメインのデスクトップフォルダの絶対パスを取得するメソッドを追加した（FSFindFolder() のラッパー）。
	* application/source/manager/BSLinkDownloadManager.m
		DownloadableLinkTypes.plist が存在しないときは、アプリケーションパッケージ内のものをコピーして配置するようにした。
	* application/Resources/text/DownloadableLinkTypes.plist
		[新規追加] アプリケーションパッケージに内包される DownloadableLinkTypes.plist のひな形。
		~/Library/Application Support/BathyScaphe に同名ファイルが見つからない場合に、このファイルを自動的にコピーする。
	* frameworks/CocoMonar/framework/src/CMRFiles.h
		サポートファイルの名前を定義する定数をいくつか追加。
2007-08-06 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	1.5 からの変更点の量・質を考慮すると、1.5.1 ではなく 1.6 とすべきと判断したので、次のバージョンは 1.6 とする。

	* application/subproj/preference/AdvancedPrefController.m
	* application/subproj/preference/Japanese.lproj/AdvancedPane.nib
		ダウンロードするリンクの拡張子リストを編集するために、「環境設定」＞「詳細」ペインに必要なインタフェースを追加。
	* application/source/manager/BSLinkDownloadManager.[h|m]
		[新規追加] ※ BSLinkDownloadTicket クラスも同居して記述されている
		リンクをクリックしたとき、直接リンク先をダウンロードするかどうかは、リンクの拡張子で決める。その拡張子のリストを
		読み書きするためのクラス。
		- 拡張子のリストは、DownloadableLinkTypes.plist という名前のファイル（例によって Application Support/BathyScaphe 内に
		　作成される）に記述される。今のところ初回起動時にはこのファイルが無い＝拡張子のリストが空の状態。このへんはもう少し改善予定。
	* application/subproj/preference/BSAdvancedPaneArrayController.[h|m]
		[新規追加] NSArrayController のサブクラス。NSTableView とバインドして contentObject を編集する際の振る舞いを
		より適切で気の利いたものにするために用意した。「環境設定」＞「詳細」＞「ダウンロードする拡張子を設定...」パネルで使用。
	* application/source/view/SGHTMLView.m
	* application/source/view/SGLinkCommand.m
	* application/source/preferences/AppDefaults-ThreadViewer.m
	* application/source/thread/CMRThreadViewer-Link.m
	* application/Resources/Japanese.lproj/HTMLView.strings
	* application/Resources/Japanese.lproj/CMRTaskDescription.strings
		リンク先を直接ダウンロードする機能を追加した。
		- リンクのコンテクストメニュー、または、適切な拡張子を持つリンクに対してはリンクの直接クリックで
		　ダウンロードできる。進行状況および中止は「進行状況」パネルやナビゲーションバーで確認できる（CMRTask プロトコル準拠だから）。
		- 拡張子ごとに、「ダウンロード後、ファイルを開くかどうか」を設定しておける。
		- ダウンロードしたファイルの保存先は、「環境設定」＞「詳細」で設定しておける（デフォルト：デスクトップ）。
=================================================
2007-08-05 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/composer/CMRMessageFilter.m
	* application/source/composer/CMRSpamFilter.m
	* application/source/bbs/BoardManager-BSAddition.m
	* application/source/bbs/BoardManager.h
	* application/source/bbs/BSBoardInfoInspector.m
		迷惑レスフィルタ周りの修正：
		- 以前は、「名無しさんのリスト」をNSSet でやり取りし、名前がデフォルト名無しかどうかを -[NSSet containsObject:] として比較してきたが、
		　NSSet のリファレンスによるとこれとは別に -[NSSet member:] というものもある。どうも member: でチェックした方が良さそうだ。
		　それはともかく、名無しさんのリストに含まれる要素数は高々数個であろうし、NSSet にするメリットはそれほどないと判断したので通常の NSArray で
		　やり取りするように変更した。
		- 迷惑レスフィルタ周りのぐちゃぐちゃした作りにはうんざりしてきた。もっとシンプルなシステムでも使用上は問題ない気がするので、考えてみよう…
	* application/source/thread/CMRThreadViewer-OwnHistory.m
	* application/source/browser/CMRBrowser-Validation.m
		2007-07-27 の変更で、「ツールバー上の NSSegmentedControl は、そのツールバーが属しているウインドウが現在キーウインドウでないときは
		適切に disabled になるようにした」が、こうするとツールバーの「クリックスルー」原則に反してしまう（キーウインドウでなくても、ツールバーの
		ボタンやコントロールはクリックスルーできる）に反してしまうため、この変更を取りやめた。
	* application/source/thread/CMRThreadDocument.m
		dat 番号が正しく読み取れないログファイルを開こうとしたときの挙動を改善した。
	* application/source/window/CMRBrowserTbDelegate.m
	* application/source/window/CMRReplyControllerTbDelegate.m
	* application/source/window/CMRThreadViewerTbDelegate.m
	* application/source/window/CMRToolbarDelegateImp.m
		ツールバーデリゲート周りの変更：
		- 2007-07-27 の変更で追加した「スレッド一覧／ログ一覧の切り替え」ボタンをツールバーに追加できないようにした。
		　（実際の機能が実装されるまでの暫定措置。混乱を防ぐため）
		- CMRToolbarDelegateImp と、各サブクラス間での重複メソッド整理などの軽いリファクタリング。
		- コーディングスタイルの統一と更新。
2007-08-01 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/view/SGHTMLView-Link.m
		ポップアップがウインドウが一つでも開いていると、テキスト・ビュー内での cursor rects の更新が
		ブロックされていたのを修正。
		- ときどき「ポップアップができなくなる」「ポップアップの表示位置がずれる」という問題はここに
		　原因があったのだと思う。Bug [10307] と [6067] は fixed, closed.
	* application/source/view/popup/CMXPopUpWindowController+View.m
	* application/source/view/popup/CMXPopUpWindowController.m
	* application/source/view/popup/CMXPopUpWindowController_p.h
		ポップアップ・ロック機能の大幅な改良：
		- L キーかホイールクリックでロックされたポップアップは、
		　タイトルバーをドラッグして自由に場所を移動できるようになった。
		- ロックしたとき／ロック解除したときの視覚効果とサウンドエフェクトを追加して、これがれっきとした「機能」であることをわかりやすくした。
		- ロック解除に「ポップアップの左上に追加されるクローズボタンをクリック」および「Esc キーを押す」の動作も可能にした。今まで通り
		　L キー押下／ホイールクリックでもロック解除できる。
	* frameworks/SGAppKit/framework/src/SGAppKit.h
		SGAppKit に BSPopUpTitlebar が加わったことに伴う変更。
	* frameworks/SGAppKit/framework/src/custom/bathyscaphe/BSPopUpTitlebar.[h|m]
		[新規追加]ポップアップウインドウで使用するタイトルバー（のような）ビュー。
2007-07-27 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/source/manager/CMRMainMenuManager.m
	* application/source/CMRAppDelegate+Menu.m
		不要になったメソッドをコメントアウト。
	* application/source/browser/BSDBThreadList.m
		とりあえず、BSDBThreadList に現在のスレッド表示モード（スレッド一覧／ログ一覧）を保持するインスタンス変数とアクセサメソッドを実装した。
	* application/source/thread/CMRThreadViewer-OwnHistory.m
		ツールバー上の NSSegmentedControl は、そのツールバーが属しているウインドウが現在キーウインドウでないときは適切に disabled になるようにした。
	* application/source/window/CMRBrowserTbDelegate.m
	* application/source/browser/CMRBrowser-Validation.m
	* application/source/browser/Browser.m
	* application/Resources/Japanese.lproj/Browser.nib
		ブラウザウインドウのツールバーに「スレッド一覧／ログ一覧の切り替え」ボタンを追加できるようにした。
	* frameworks/CocoMonar/framework/src/CMRAppTypes.h
		BSThreadsViewModeType を定義した。
	* frameworks/SGNetwork/src/SGNetwork.h
		SGNetwork フレームワークは大幅に規模を縮小し、多くのクラスが使用停止となった。
	* application/source/preferences/CMRPreferencesDefautValues.h
	* application/source/preferences/AppDefaults.m
	* application/source/preferences/AppDefaults-ThreadsList.m
		スレッド表示モード（スレッド一覧／ログ一覧）の設定の読み書き対応。
2007-07-22 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/subproj/reply/account/w2chAuthenticater.m
		●ログイン周りも NSURLConnection ベースにしてみたが、今 tsawada2 は●アカウントを持っていないので検証は出来ていない。
		いずれにせよこれでほぼレガシーな SGNetwork のクラス群とはオサラバできた。
	* application/Info-reply.plist
	* application/subproj/reply/connector/SG2chConnector.m
	* application/subproj/reply/connector/w2chConnect.h
	* application/source/window/CMRReplyMessenger-Connector.m
		SG2chConnector クラスは、NSURLHandle ベースを脱却し、NSURLConnection ベースになった。
		なお、Cookie 管理は今までどおり独自に行うこととし、WebKit に委ねる（＝他の WebKit アプリケーションと Cookie を共有）することは
		しない。
		- まだ●ログイン周りが NSURLConnection ベースになっていない。
	* application/source/network/CMRNetRequestQueue.[h|m]
		よく調べるとこのクラスは使われていなかったので、ターゲットから外した。いずれリポジトリからも削除する。
	* application/source/CMRAppDelegate+Menu.m
	* application/source/browser/CMRBrowser-Action.m
	* application/source/browser/CMRBrowser-Validation.m
	* application/source/browser/CMRBrowser.h
	* application/source/browser/CMRBrowser.m
	* application/source/manager/CMRMainMenuManager.m
	* application/source/window/CMRBrowserTbDelegate.m
	* application/source/window/CMRThreadViewerTbDelegate.m
	* application/Resources/Japanese.lproj/MainMenu.nib
	* application/subproj/preference/AdvancedPrefController.m
	* application/subproj/preference/Japanese.lproj/AdvancedPane.nib
	* application/subproj/preference/Japanese.lproj/GeneralPreferences.nib
	* application/Resources/Japanese.lproj/Localizable.strings
		<<「表示」メニューの変更：>>
		- 「ブラウザの配置」サブメニューを廃止した。横置き／縦置きの切り替えは「環境設定」＞「一般」で行うようにした。
		- 「一覧に表示するスレッド」サブメニューを試験的に廃止した。現在、この機能にアクセスする方法はないので
		　現時点でのビルドを使用する前に、「一覧に表示するスレッド」の設定は「すべて」にしといた方がいいと思いますですよ。
		- 「ブラウザを垂直（水平）方向に分割」メニューを追加。スプリットバーのダブルクリックと同じ。
		　分割されているときは「分割表示を閉じる」に変わる。2ペインと3ペインのすばやい切り替え。
		- 「スレッド一覧／ログ一覧に切り替え」メニューを追加。構想中であるが具体的には何も実装されていない。使用不可。
		<<「ウインドウ」メニュー、およびツールバーの変更：>>
		- ログ管理アプリケーションを起動するメニュー項目／ツールバー項目を廃止した。
		- 「環境設定」＞「詳細」ペインからログ管理アプリケーションの選択インタフェースを取り除いた。
	* application/source/network/CMRDATDownloader.m
	* application/source/network/CMRDownloader-Task.m
	* application/source/network/CMRDownloader.m
	* application/source/network/CMRDownloader_p.h
	* application/source/network/CMRThreadHTMLDownloader.m
	* application/source/network/ThreadTextDownloader.m
	* application/Resources/Japanese.lproj/Downloader.strings
		CMRDownloader とそのサブクラス達は、NSURLHandle ベースを脱却し、NSURLConnection ベースになった。
	* application/source/preferences/AppDefaults-Background.m
	* application/source/preferences/AppDefaults-FontColor.m
		微修正。
	* application/source/view/popup/CMXPopUpWindowController+View.m
	* application/source/view/popup/CMXPopUpWindowController.m
	* application/source/view/popup/CMXPopUpWindowManager.m
		内部構造の改修中。この影響でポップアップ・ロック機能が一部正常に動作しなくなっているが、後で直すので気にしないこと。
	* application/Resources/Japanese.lproj/CMRThreadMenu.nib
		「Google 検索」→「Google で検索」、「Wikipediaで表示」→「Wikipedia で表示」
2007-06-29 tsawada2 <ben-sawa@td5.so-net.ne.jp>
	* application/Info-bs-another-story.plist
		Info.plist に CFBundleURLTypes を書き忘れていたのを修正。
2007-06-26 masakih <masakih@users.sourceforge.jp>
	* application/source/manager/DatabaseManager-Notifications.m:
		[新規追加] DatabaseManager.m から分離
	* application/source/manager/DatabaseManager.m:
		Notification を別ファイルに分離。
	* application/source/browser/BSDownloadTask.m:
		不要な部分を削除。
================================================= 1.5(v110) / Starlight Breaker / CVS Tag : v150_FINAL
これより以前は、docs/old_changelog/changelog_until_starlight_breaker_final.txt を参照。
